<m-flex-template :menuOpen="menuOpen">
    <m-template>
        <div slot="header">
            <m-link :underline="false" :unvisited="true" icon-name="left-arrow">Menu</m-link>
            <h1>{{$route.meta}}</h1>
        </div>
        <m-dynamic-template :template="tag"></m-dynamic-template>
    </m-template>
    <div slot="footer">Footer</div>

    {{ newItem }}
    <button @click="deleteItem">Delete an Item</button>
    <div v-m-draggable="true"
        :drag-data="dummyData">
        {{ dummyText }} <button @click="changeText()">Change my text</button> <button @click="changeDummyData()">Change my data</button>
    </div>

    <div v-m-droppable="true"
        :accepted-actions="['any']"
        @droppable:dragleave="doSomething">
        <div>Hello :)</div>
        <div>Another child!</div>
        <div>Wow</div>
    </div>

    <div v-m-draggable="true"
        :drag-data="newItem">
        Drag any
    </div>
    <div v-m-draggable="true"
        :drag-data="newItem"
        :action="'someAction'">
        Drag SomeAction
    </div>
    <div v-m-draggable="true"
        :drag-data="newItem"
        :action="'addGrouping'">
        Drag SomeAction grouping
    </div>
<!--
    <div v-m-droppable="true" style="background-color: red; margin: 20px;" @droppable:dragenter="log('true enter', $event);" @droppable:dragleave="log('true leave', $event);">
        <div>Im a child</div>
        <div>Me too!</div>
        <div>hehe</div>
        <div v-m-droppable="true">Im a nested droppable</div>
        <div v-m-droppable="true">
            <div>Same</div>
            <div>with</div>
            <div>childs</div>
        </div>
    </div> -->
    <div v-m-sortable
        :items="items"
        :accepted-actions="['someAction', 'addGrouping']"
        @sortable:add="handleSortableAdd($event, items)"
        @sortable:move="handleSortableMove($event, items)"
        @sortable:remove="handleSortableRemove($event, items)"
        style="background-color: lightYellow; width: 100%; border: 1px solid red; margin-top: 10px;">
        <div class="emptyPlaceholder" style="background-color: lightgreen;">No Items.  Drop SomeAction on me!</div>
        <div class="placeholder" style="background-color: darkgreen; height: 10px;"></div>
        <div v-for="item in items" style="padding: 5px;">
            Item #{{ item.id }}: {{ item.text }}.
            <span v-if="item.grouping">Group: {{ item.grouping }}</span>
            <div v-m-sortable
                v-if="item.grouping"
                :items="item.items"
                :accepted-actions="['someAction']"
                :grouping="item.grouping"
                @sortable:add="handleSortableAdd($event, item.items)"
                @sortable:move="handleSortableMove($event, item.items)"
                @sortable:remove="handleSortableRemove($event, item.items)"
                style="background-color: lightblue; width: 100%; border: 1px solid violet;">
                <div class="emptyPlaceholder" style="background-color: lightgreen;">Ajouter un item au groupe {{ item.grouping }}</div>
                <div class="placeholder" style="background-color: red; height: 1px;"></div>
                <div v-for="subItem in item.items" style="padding: 5px;">Item #{{subItem.id}}</div>
            </div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div id="messageSortable">
    </div>
    <div v-m-sortable
        :items="items2"
        :accepted-actions="['move']"
        @sortable:add="handleSortableAdd($event, items2)"
        @sortable:move="handleSortableMove($event, items2)"
        @sortable:remove="handleSortableRemove($event, items2)"
        class="sortable">
        <div class="emptyPlaceholder empty-placeholder">
            <div class="empty-placeholder__container">
                <div class="empty-placeholder__inner empty-placeholder__inner--centered">Drop an item from another sortable on me!</div>
            </div>
        </div>
        <div v-for="item in items2" class="sortable__item">
            <div class="sortable__item--inner">
                Item #{{ item.id }}: {{ item.text }}.
                <span v-if="item.grouping">Group: {{ item.grouping }}</span>
                <button>Can you click me?</button>
                <div v-m-sortable
                    v-if="item.grouping"
                    :items="item.items"
                    :accepted-actions="['someAction']"
                    :grouping="item.grouping"
                    @sortable:add="handleSortableAdd($event, item.items)"
                    @sortable:move="handleSortableMove($event, item.items)"
                    @sortable:remove="handleSortableRemove($event, item.items)"
                    class="sortable sort-group">
                    <div class="emptyPlaceholder empty-placeholder">
                        <div class="empty-placeholder__container">
                            <div class="empty-placeholder__inner empty-placeholder__inner--centered">Ajouter un item au groupe {{ item.grouping }}</div>
                        </div>
                    </div>
                    <div v-for="subItem in item.items" class="sortable__item">
                        <div class="sortable__item--inner">
                                Item #{{subItem.id}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</m-flex-template>
