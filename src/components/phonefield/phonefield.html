<div class="m-phonefield"
     :class="[{ 'm--is-disabled': isDisabled,
                'm--is-waiting': isWaiting,
                'm--is-readonly': isReadonly,
                'm--has-error': hasPhonefieldError,
                'm--is-valid': isPhonefieldValid,
                'm--has-validation-message': hasValidationMessage } ]">
    <div class="m-phonefield__wrapper">
        <m-select class="m-phonefield__country"
                  v-model="countryModel"
                  :options="isoCountries"
                  :disabled="isDisabled"
                  :waiting="isWaiting"
                  :readonly="isReadonly"
                  :error="hasPhonefieldError"
                  :valid="isPhonefieldValid"
                  width="auto">
            <div class="m-phonefield__flag-wrapper">
                <m-flag :iso="countryModel"></m-flag>
            </div>

            <template slot="option"
                      slot-scope="{option, index}">
                <div class="m-phonefield__item-wrapper">
                    <m-flag class="m-phonefield__item-flag"
                            :iso="option"></m-flag>
                    <span class="m-phonefield__item-country">{{ countries[index].name }}</span>
                </div>
            </template>

        </m-select>
        <div>
            <m-input-style class="m-phonefield__number"
                           :disabled="isDisabled"
                           :waiting="isWaiting"
                           :error="hasPhonefieldError"
                           :valid="isPhonefieldValid"
                           :label="propLabel"
                           :label-for="id"
                           :focus="isFocus"
                           :label-up="true"
                           :empty="isEmpty"
                           :readonly="isReadonly"
                           :required-marker="requiredMarker"
                           :tag-style="tagStyle">
                <m-input-mask v-model="model"
                              :id="id"
                              :disabled="isDisabled || isWaiting"
                              :placeholder="placeholder"
                              :readonly="isReadonly"
                              :options="inputMaskOptions"
                              @focus="onFocus"
                              @blur="onBlur"
                              @keyup="onKeyup"
                              @change="onChange"
                              ref="inputMask"></m-input-mask>
            </m-input-style>
            <p class="m-phonefield__example">{{ i18nExample }}{{ example }}</p>
        </div>
    </div>
    <div class="m-phonefield__validation">
        <m-validation-message class="m-phonefield__validation-message"
                              :disabled="isDisabled"
                              :waiting="isWaiting"
                              :error="hasPhonefieldError"
                              :error-message="errorMessage"
                              :valid="isPhonefieldValid"
                              :valid-message="validMessage"
                              :helper-message="helperMessage"></m-validation-message>
    </div>

</div>
