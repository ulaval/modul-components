@import '../../styles/abstracts/variables';

$m-tree-node--icon-width: 18px;
$m-tree-node--icon-height: 18px;
$m-tree-node--icon-border-width: 1px;
$m-accordion--icon-plus-width: 10px;
$m-accordion--icon-minus-width: 1px;

.m-tree {
    color: $m-color--text;

    &__single-node {
        margin-bottom: $m-margin--s;
        user-select: none;
    }

    &__with-children {
        user-select: none;

        &__header {
            cursor: pointer;
            margin-bottom: $m-margin--s;
            margin-left: $m-margin--xs;

            .m--is-disabled & {
                color: $m-color--grey-light;
            }

            &__icon {
                width: $m-tree-node--icon-width;
                height: $m-tree-node--icon-height;
                margin-right: $m-margin--xs;
                border-width: $m-tree-node--icon-border-width;
                border-color: $m-color--interactive;
                border-style: solid;
                display: inline-block;
                text-align: center;
                position: relative;

                .m--is-disabled & {
                    border-color: $m-color--grey-light;

                    &::before,
                    &::after {
                        background: $m-color--grey-light;
                    }
                }

                &::before,
                &::after {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    content: '';
                    background: $m-color--interactive;
                    transform: translate3d(-50%, -50%, 0);
                    transition: transform $m-transition-duration ease;
                }

                &::before {
                    width: $m-accordion--icon-plus-width;
                    height: $m-accordion--icon-minus-width;
                }

                &::after {
                    transition: transform $m-transition-duration ease, opacity 0.6s ease;
                    width: $m-accordion--icon-minus-width;
                    height: $m-accordion--icon-plus-width;
                }

                &.m--is-closed {
                    &::before,
                    &::after {
                        transform: translate3d(-50%, -50%, 0) rotate(90deg);
                    }

                    &::before {
                        opacity: 0;
                    }
                }
            }
        }

        &__body {
            &-enter-active,
            &-leave-active {
                transition: all 0.5s;
                height: auto;
            }

            &-enter,
            &-leave-to {
                transform: translateY(-5px);
                opacity: 0;
            }
        }

        &__children {
            margin-left: $m-margin--l + 4;
        }
    }
}
