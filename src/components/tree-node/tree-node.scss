@import '../../styles/abstracts/variables';

$m-tree-node--icon-width: 18px;
$m-tree-node--icon-height: 18px;
$m-tree-node--icon-border-width: 1px;
$m-accordion--icon-plus-width: 10px;
$m-accordion--icon-minus-width: 1px;

.m-tree-node {
    color: $m-color--ul-blue;

    &__single-node {
        margin-bottom: $m-margin;
        user-select: none;
        border: 1px solid $m-color--ul-blue;
        border-radius: 22px;
        padding: 9px 21px;
        width: $m-min-width;

        &.m--is-node-selected {
            color: #fff;
            background-color: $m-color--interactive-darker;
            border-color: $m-color--interactive-darker;
        }
    }

    /deep/ .m-link__text {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    &__with-children {
        user-select: none;

        &__header {
            cursor: pointer;
            margin-bottom: $m-margin;
            border: 1px solid $m-color--ul-blue;
            border-radius: 22px;
            padding: 9px 21px;
            width: $m-min-width;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;

            &__icon {
                width: $m-tree-node--icon-width;
                height: $m-tree-node--icon-height;
                margin-right: $m-margin--xs;
                border-width: $m-tree-node--icon-border-width;
                border-color: $m-color--interactive;
                border-style: solid;
                display: inline-block;
                text-align: center;
                position: relative;

                &::before,
                &::after {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    content: '';
                    background: $m-color--interactive;
                    transform: translate3d(-50%, -50%, 0);
                    transition: transform $m-transition-duration ease;
                }

                &::before {
                    width: $m-accordion--icon-plus-width;
                    height: $m-accordion--icon-minus-width;
                }

                &::after {
                    transition: transform $m-transition-duration ease, opacity 0.6s ease;
                    width: $m-accordion--icon-minus-width;
                    height: $m-accordion--icon-plus-width;
                }

                &.m--is-closed {
                    &::before,
                    &::after {
                        transform: translate3d(-50%, -50%, 0) rotate(90deg);
                    }

                    &::before {
                        opacity: 0;
                    }
                }
            }
        }

        &__body {
            &-enter-active,
            &-leave-active {
                transition: all 0.5s;
                height: auto;
            }

            &-enter,
            &-leave-to {
                transform: translateY(-5px);
                opacity: 0;
            }
        }

        &__children {
            margin-left: 52px;
            position: relative;

            &::before {
                content: "";
                position: absolute;
                left: -22px;
                top: 21px;
                width: 22px;
                height: 1px;
                background-color: $m-color--ul-blue;
            }

            &::after {
                content: "";
                position: absolute;
                left: -22px;
                width: 1px;
                top: -12px;
                height: 56px;
                background-color: $m-color--ul-blue;
            }

            &:last-child::after {
                height: 34px;
            }
        }

        &__no-children {
            margin-left: $m-margin--l + 6;
            margin-bottom: $m-margin--s;
            color: $m-color--disabled;
        }
    }
}
