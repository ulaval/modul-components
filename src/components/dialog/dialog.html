<div class="m-dialog" ref="baseWindow">
    <slot name="trigger"></slot>
    <portal :target-el="portalTargetSelector" v-if="portalCreated">
        <transition name="m--is">
            <div class="m-dialog__wrap"
                 :class="[{ 'm--is-disabled': disabled }, className ]"
                 v-show="propOpen"
                 v-if="portalMounted"
                 ref="modalWrap">
                <article class="m-dialog__article"
                         :class="{ 'm--has-width-large': hasWidthLarge }"
                         ref="article">
                    <header class="m-dialog__header"
                            v-if="hasTitle">
                        <h2>{{ title }}</h2>
                    </header>
                    <div class="m-dialog__body">
                        <div v-if="type !== 'default'">
                            <m-message class="m-u--margin-top--l" skin="page-light" :state="getState()"></m-message>
                        </div>
                        <div v-if="hasDefaultSlot || hasMessage">
                            <p v-if="hasMessage" v-html="message"></p>
                            <slot></slot>
                        </div>
                        <div v-if="hasHint">
                            <m-message state="hint" >{{ hint }}</m-message>
                        </div>
                    </div>
                    <footer class="m-dialog__footer">
                        <slot name="footer"></slot>
                        <nav class="m-dialog__footer__nav"
                             v-if="!hasFooterSlot">
                            <m-button @click="onPrimaryButton()">
                                <template v-if="hasPrBtnLabel">{{ prBtnLabel }}</template>
                                <m-i18n v-else k="m-dialog:ok"></m-i18n>
                                <template slot="precision" v-if="hasPrBtnPrecision">{{ prBtnPrecision }}</template>
                            </m-button>
                            <m-button @click="onSecondaryButton()" skin="secondary" isRegularSize="true" v-if="secBtn">
                                <template v-if="hasSecBtnLabel">{{ secBtnLabel }}</template>
                                <m-i18n v-else k="m-dialog:close"></m-i18n>
                                <template slot="precision" v-if="hasSecBtnPrecision">{{ secBtnPrecision }}</template>
                            </m-button>
                            <m-link mode="button" @click="onCancelLink()" v-if="cancelLink">
                                <template v-if="hasCancelLinkLabel">{{ cancelLinkLabel }}</template>
                                <m-i18n v-else k="m-dialog:cancel"></m-i18n>
                            </m-link>
                        </nav>
                    </footer>
                </article>
            </div>
        </transition>
    </portal>
</div>
